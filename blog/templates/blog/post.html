{% extends 'blog/base.html' %}
{% load humanize %} 
{% block content %} 
  
{% if post %}
    <div class="my-3 p-3 bg-white rounded box-shadow">
        <div><h3>{{post.title}}</h3></div>
        <div class="text-muted"> posted {{ post.created_at|naturaltime}} by 
            <a href="{% url 'blog:blogger' post.created_by %}">{{ post.created_by}}</a>
        </div>

        <div class="mt-4"> {{ post.get_post_as_markdown}} </div>
    </div>
{% endif %} 


{% if comments %}
<div class="my-3 p-4 bg-white rounded box-shadow">
    <h4 class='comment-title'>Comments</h4>
    {% if user.is_authenticated %}
    <a href="{% url 'blog:comment' post.id %}">
    <button class='btn btn-light comment-btn'>New Comment</button>
    </a>
    {% endif %}
    {% for comment in comments %}
        <div>
            <hr>
            
            {% if comment.created_by.is_blogger %}
            <a href="{% url 'blog:blogger' post.created_by %}"><strong>{{ comment.created_by }}</strong></a>
            {% else %}
            <strong>{{ comment.created_by }}</strong>
            {% endif %}

            <span>{{comment.content}}</span>
            <small class="text-muted">{{ comment.created_at|naturaltime}}</small>
        </div>
     {% endfor %}
</div>
{% else %}
<div class="my-3 p-4 bg-white rounded box-shadow">
    <h4 class='comment-title'>Comments</h4>
    <a href="{% url 'blog:comment' post.id %}">
        <button class='btn btn-light comment-btn'>New Comment</button>
    </a>

</div>
{% endif %}


{% endblock %}